import{i as Ja,_ as Qa}from"../chunks/95y0HvCI.js";import{t as Pa,b as Ia}from"../chunks/BepMncb2.js";import{j as L,a8 as Wa,a9 as Xa,aa as Za,ab as ae,ac as ee,u as te,r as oe,N as se,ad as b,ae as Ta,a5 as f,a7 as s,a4 as ne,g as a,P as ie,s as h,a6 as m,af as Ba}from"../chunks/BOMHANS_.js";import{d as re}from"../chunks/zi6PulGB.js";import{a as le,l as _e,b as xa,c as pe,f as C}from"../chunks/ZtERAYkb.js";import{b as Oa}from"../chunks/C9kmxJ6c.js";import{o as ue}from"../chunks/B6dKC9Gf.js";import{b as ve}from"../chunks/DiXHzdqx.js";function de(e,o){return e==null?null:String(e)}function ce(e,o,n,l){var v=e.__style;if(L||v!==o){var w=de(o);(!L||w!==e.getAttribute("style"))&&(w==null?e.removeAttribute("style"):e.style.cssText=w),e.__style=o}return l}const fe=Symbol("is custom element"),me=Symbol("is html");function $a(e){if(L){var o=!1,n=()=>{if(!o){if(o=!0,e.hasAttribute("value")){var l=e.value;ka(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var v=e.checked;ka(e,"checked",null),e.checked=v}}};e.__on_r=n,ae(n),le()}}function ka(e,o,n,l){var v=he(e);L&&(v[o]=e.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&e.nodeName==="LINK")||v[o]!==(v[o]=n)&&(o==="loading"&&(e[ee]=n),n==null?e.removeAttribute(o):typeof n!="string"&&ge(e).includes(o)?e[o]=n:e.setAttribute(o,n))}function he(e){return e.__attributes??(e.__attributes={[fe]:e.nodeName.includes("-"),[me]:e.namespaceURI===Wa})}var ja=new Map;function ge(e){var o=ja.get(e.nodeName);if(o)return o;ja.set(e.nodeName,o=[]);for(var n,l=e,v=Element.prototype;v!==l;){n=Za(l);for(var w in n)n[w].set&&o.push(w);l=Xa(l)}return o}function qa(e,o,n=o){_e(e,"change",l=>{var v=l?e.defaultChecked:e.checked;n(v)}),(L&&e.defaultChecked!==e.checked||te(o)==null)&&n(e.checked),oe(()=>{var l=o();e.checked=!!l})}var be=(e,o,n)=>{o(),n()},we=async(e,o,n,l)=>{await o(),n(),l()},ye=async(e,o,n,l)=>{await o(),n(),l()},Te=Pa("<select><option>Topp 1</option><option>Topp 2</option><option>Topp 3</option><option>Topp 4</option><option>Topp 5</option><option>Topp 6</option><option>Topp 7</option><option>Topp 8</option><option>Topp 9</option><option>Topp 10</option><option>Topp 11</option><option>Topp 12</option><option>Topp 13</option><option>Topp 14</option><option>Topp 15</option><option>Topp 16</option><option>Topp 17</option><option>Topp 18</option><option>Topp 19</option><option>Topp 20</option></select>"),xe=(e,o)=>o(),ke=(e,o)=>o(),Ae=Pa('<div class="full-height-container svelte-1wlsadb"><div class="controls svelte-1wlsadb"><select><optgroup label="Føst kalendara tíðarskeið"><option>Mánaða</option> <option>ársfjóring</option> <option>Hálvár</option> <option>Ár</option></optgroup><optgroup label="Føst tíðarskeið frá nýggjastu data av"><option>Seinastu 3 mánaðir</option> <option>Seinastu 6 mánaðir</option> <option>Seinastu 12 mánaðir</option></optgroup><optgroup label="Mánaði við rullandi miðal"><option>3 mánaðir</option> <option>6 mánaðir</option> <option>12 mánaðir</option></optgroup></select> <div class="preset-filter-wrapper svelte-1wlsadb"><label style="white-space: nowrap"><span>Individuel lond</span> <select><option>Tilsamans</option><option>Eingin lond</option><option>Bert Russland</option><option>Russland / Evropa / Restin</option><option>Topp N lond</option></select></label> <!></div> <label style="white-space: nowrap"><input type="checkbox"> Vís Tilsamans</label> <label><input type="checkbox"> Tak Russland úr tilsamans</label> <span style="white-space: nowrap"><a>Tabell við øllum data</a></span></div> <div class="content svelte-1wlsadb"><div class="main-chart-wrapper svelte-1wlsadb"><div></div></div> <div class="brush-chart-wrapper svelte-1wlsadb"><div></div></div></div></div>');function Le(e,o){se(o,!0);let n=b("only_russia"),l=b(10),v=b(!1),w=b(!1),H=b(void 0),Y=b(void 0),g=b("last-3-months"),I=b(Ta([])),D=b(Ta([])),k=b(Ta({data:[],name:""})),U,V,z=b(void 0),G=b(void 0),B=null,u;function T(t){return{name:t.name,data:t.data.map((_,p)=>[a(I)[p],_])}}function Ha(){const t=a(D).find(p=>p.name==="Russland")||(u==null?void 0:u.months_data.individual_series.find(p=>p.name==="Russland"));return t?{data:a(k).data.map((p,r)=>{const c=t.data[r]||0;return Math.round((p-c)*100)/100}),name:"Tilsamans (uttan Russland)"}:{...a(k),name:"Tilsamans (uttan Russland)"}}function A(t){return a(D).find(_=>_.name===t)}function Aa(t,_){const p=a(k).data.length,r=new Array(p).fill(0);for(const c of t)for(let i=0;i<p;i++)r[i]+=c.data[i]??0;return r.forEach((c,i)=>{r[i]=Math.round(c*100)/100}),{name:_,data:r}}async function K(){if(a(n)==="top_list"){const t=pe.series.slice(0,a(l)).map(_=>_.name);u=await C(t)}else if(a(n)==="only_russia")u=await C(["Russland"]);else if(a(n)==="russia_europe_and_rest")h(v,!1),h(w,!1),u=await C(["Russland"]);else if(a(n)==="none")u=await C();else if(a(n)==="sum")u=await C();else{const t=a(n);throw new Error("Invalid preset: "+t)}}ue(async()=>{await K(),O();const t=a(I)[a(I).length-1],_=new Date;_.setFullYear(t.getFullYear()-6),h(z,{chart:{id:"main_chart",height:"100%",type:"line",zoom:{enabled:!1}},colors:["#e6194B","#ffe119","#3cb44b","#42d4f4","#4363d8","#911eb4","#aaffc3","#f58231","#f032e6","#000075","#800000","#99d8f6","#bfef45","#ffd8b1","#dcbeff","#e5a5d5","#ff8c00","#46f0f0","#fffac8","#fabebe","#008080","#775DD0","#1E90FF","#32CD32","#FF4500","#FF1493","#C71585","#6A5ACD","#20B2AA"],stroke:{width:3,curve:"monotoneCubic"},series:[...a(D).map(r=>T(r))],xaxis:{type:"datetime",tooltip:{enabled:!1}},yaxis:{labels:{formatter(r){return Math.round(r).toLocaleString("de-DE",{minimumFractionDigits:0,maximumFractionDigits:0})}}}},!0),h(G,{series:[T(a(k))],chart:{id:"brush_chart",height:"100%",type:"area",brush:{target:"main_chart",enabled:!0},selection:{enabled:!0,xaxis:{min:_.getTime(),max:t.getTime()}},events:{brushScrolled(...r){const c=r[1];console.log("brush selection",c.xaxis.min,c.xaxis.max),B=[c.xaxis.min,c.xaxis.max]}}},colors:["#008FFB"],fill:{type:"gradient",gradient:{opacityFrom:.91,opacityTo:.1}},xaxis:{type:"datetime",tooltip:{enabled:!1}},yaxis:{labels:{formatter(r){return Math.round(r).toLocaleString("de-DE",{minimumFractionDigits:0,maximumFractionDigits:0})}}}},!0);const p=(await Qa(async()=>{const{default:r}=await import("../chunks/DzLBnlhl.js");return{default:r}},[],import.meta.url)).default;window.ApexCharts=p,U=new p(a(H),a(z)),V=new p(a(Y),a(G)),U.render(),V.render()});function O(){if(u==null)throw new Error("Data not loaded");let t;if(a(g)==="months")t=u.months_data;else if(a(g)==="quarters")t=u.quarters_data;else if(a(g)==="half-year")t=u.half_year_data;else if(a(g)==="years")t=u.years_data;else if(a(g)==="rolling-3-months")t=u.rolling_3_months_data;else if(a(g)==="rolling-6-months")t=u.rolling_6_months_data;else if(a(g)==="rolling-12-months")t=u.rolling_12_months_data;else if(a(g)==="last-3-months")t=u.last_3_months_data;else if(a(g)==="last-6-months")t=u.last_6_months_data;else if(a(g)==="last-12-months")t=u.last_12_months_data;else throw new Error("Invalid range");h(I,t.dates,!0),h(D,t.series,!0),h(k,t.all_series,!0)}function S(){if(a(z)==null||a(G)==null)throw new Error("Chart options not loaded");let t;if(a(n)==="sum")t=[T(a(k))];else if(a(n)==="russia_europe_and_rest"){const i=A("Russland"),d=A("Evropa"),x=A("Norðurlond"),y=A("Asia"),E=A("Afrika"),F=A("Amerika");if(!i||!d||!x||!y||!E||!F)throw new Error("Missing expected region series for preset russia_europe_and_rest");const R=Aa([d,x],"Evropa + Norðurlond"),N=Aa([y,E,F],"Asia + Afrika + Amerika");t=[T(i),T(R),T(N)]}else{const i=[...a(D).map(d=>T(d))];if(a(v))if(a(w)){const d=Ha();i.push(T(d))}else i.push(T(a(k)));t=i}const _=t.map(i=>{var y;const d=(y=i==null?void 0:i.data)==null?void 0:y.at(-1),x=Array.isArray(d)?d[1]:void 0;return{name:i==null?void 0:i.name,value:x}}),p=_.reduce((i,{value:d})=>i+d,0);_.push({name:"Tilsamans",value:p});const r=_.map(({name:i,value:d})=>{const x=d/p*100,y=Math.round(d).toLocaleString("de-DE",{minimumFractionDigits:0,maximumFractionDigits:0});return`${i}: ${y} kr (${x.toFixed(2)}%)`});console.log(`last values:
`+r.join(`
`)),U.updateSeries(t);const c={series:[T(a(k))]};B&&(c.chart={selection:{xaxis:{min:B[0],max:B[1]}}}),V.updateOptions(c)}var J=Ae(),Q=f(J),M=f(Q);M.__change=[be,O,S];var W=f(M),X=f(W);X.value=X.__value="months";var Z=s(X,2);Z.value=Z.__value="quarters";var aa=s(Z,2);aa.value=aa.__value="half-year";var Ea=s(aa,2);Ea.value=Ea.__value="years",m(W);var ea=s(W),ta=f(ea);ta.value=ta.__value="last-3-months";var oa=s(ta,2);oa.value=oa.__value="last-6-months";var Fa=s(oa,2);Fa.value=Fa.__value="last-12-months",m(ea);var Da=s(ea),sa=f(Da);sa.value=sa.__value="rolling-3-months";var na=s(sa,2);na.value=na.__value="rolling-6-months";var Sa=s(na,2);Sa.value=Sa.__value="rolling-12-months",m(Da),m(M);var ia=s(M,2),ra=f(ia),$=s(f(ra),2);$.__change=[we,K,O,S];var la=f($);la.value=la.__value="sum";var _a=s(la);_a.value=_a.__value="none";var pa=s(_a);pa.value=pa.__value="only_russia";var ua=s(pa);ua.value=ua.__value="russia_europe_and_rest";var Ma=s(ua);Ma.value=Ma.__value="top_list",m($),m(ra);var Ya=s(ra,2);{var Ua=t=>{var _=Te();_.__change=[ye,K,O,S];var p=f(_);p.value=p.__value=1;var r=s(p);r.value=r.__value=2;var c=s(r);c.value=c.__value=3;var i=s(c);i.value=i.__value=4;var d=s(i);d.value=d.__value=5;var x=s(d);x.value=x.__value=6;var y=s(x);y.value=y.__value=7;var E=s(y);E.value=E.__value=8;var F=s(E);F.value=F.__value=9;var R=s(F);R.value=R.__value=10;var N=s(R);N.value=N.__value=11;var ca=s(N);ca.value=ca.__value=12;var fa=s(ca);fa.value=fa.__value=13;var ma=s(fa);ma.value=ma.__value=14;var ha=s(ma);ha.value=ha.__value=15;var ga=s(ha);ga.value=ga.__value=16;var ba=s(ga);ba.value=ba.__value=17;var wa=s(ba);wa.value=wa.__value=18;var ya=s(wa);ya.value=ya.__value=19;var La=s(ya);La.value=La.__value=20,m(_),xa(_,()=>a(l),Ka=>h(l,Ka)),Ia(t,_)};Ja(Ya,t=>{a(n)==="top_list"&&t(Ua)})}m(ia);var va=s(ia,2),j=f(va);$a(j),j.__change=[xe,S],Ba(),m(va);var q=s(va,2),P=f(q);$a(P),P.__change=[ke,S],Ba(),m(q);var Ra=s(q,2),Va=f(Ra);ka(Va,"href",`${ve??""}/by-month-table/months`),m(Ra),m(Q);var Na=s(Q,2),da=f(Na),za=f(da);Oa(za,t=>h(H,t),()=>a(H)),m(da);var Ca=s(da,2),Ga=f(Ca);Oa(Ga,t=>h(Y,t),()=>a(Y)),m(Ca),m(Na),m(J),ne(()=>{j.disabled=a(n)==="sum"||a(n)==="russia_europe_and_rest",ce(q,`white-space: nowrap; ${a(v)?"":"display: none;"}`),P.disabled=a(n)==="sum"||a(n)==="russia_europe_and_rest"||!a(v)}),xa(M,()=>a(g),t=>h(g,t)),xa($,()=>a(n),t=>h(n,t)),qa(j,()=>a(v),t=>h(v,t)),qa(P,()=>a(w),t=>h(w,t)),Ia(e,J),ie()}re(["change"]);export{Le as component};
